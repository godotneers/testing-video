[gd_scene load_steps=15 format=3 uid="uid://bu0i0bw2bdi0v"]

[ext_resource type="Script" uid="uid://bcgfwy4huysu3" path="res://game/components/level/level.gd" id="1_l062r"]
[ext_resource type="PackedScene" uid="uid://beer7ipemffei" path="res://game/components/room/room.tscn" id="3_bopiy"]
[ext_resource type="PackedScene" uid="uid://dnkbrgkapchow" path="res://game/components/environment/environment.tscn" id="3_f8qbj"]
[ext_resource type="PackedScene" uid="uid://bxnqvs8yvjnkw" path="res://game/components/exit_gate/exit_gate.tscn" id="4_5bsyv"]
[ext_resource type="PackedScene" uid="uid://bbmimwt64bivt" path="res://game/components/large_trigger_plate/large_trigger_plate.tscn" id="5_qph2h"]
[ext_resource type="PackedScene" uid="uid://bkqdelq0ggow3" path="res://game/components/thing_mover/thing_mover.tscn" id="6_vam6r"]
[ext_resource type="PackedScene" uid="uid://di0lsfhe27r0f" path="res://game/components/wall/wall.tscn" id="7_ojljd"]
[ext_resource type="Texture2D" uid="uid://bcct3yt11cvoa" path="res://game/components/code_wheel/hexagon.png" id="8_5n4xy"]
[ext_resource type="Texture2D" uid="uid://dpnsge61pwtcx" path="res://game/components/code_wheel/triangle.png" id="9_s44d6"]
[ext_resource type="Texture2D" uid="uid://slt54osk5g8" path="res://game/components/code_wheel/quad.png" id="10_ivukf"]
[ext_resource type="PackedScene" uid="uid://c7nc0u4a1c682" path="res://game/components/pedestal/pedestal.tscn" id="11_impsd"]
[ext_resource type="PackedScene" uid="uid://bjj8a32gp0an7" path="res://game/components/player_spawn_point/player_spawn_point.tscn" id="12_mhi6w"]

[sub_resource type="NavigationMesh" id="NavigationMesh_ttjls"]
vertices = PackedVector3Array(-11.25, 0.5, -11.25, -11.25, 0.5, -4.5, -10.5, 0.5, -4, 11.5, 0.5, -11.25, -10.5, 0.5, 1.75, -11.25, 0.5, 2.25, -11.25, 0.5, 11.5, 11.5, 0.5, 11.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(2, 3, 4), PackedInt32Array(4, 3, 7)]
geometry_source_geometry_mode = 1
geometry_source_group_name = &"navmesh"
agent_radius = 1.0
agent_max_slope = 50.0
filter_ledge_spans = true

[sub_resource type="Curve3D" id="Curve3D_jhqhn"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 16.597, 0, -17.481, 0, 0, 0, 0, 0, 0, 18.0656, 0, -9.75919, 0, 0, 0, 0, 0, 0, 11.6043, 0, -9.72395, 0, 0, 0, 0, 0, 0, 12.297, 0, -17.2731),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[node name="Level2" type="Node3D"]
script = ExtResource("1_l062r")

[node name="Navigation" type="Node" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Navigation"]
navigation_mesh = SubResource("NavigationMesh_ttjls")
metadata/_edit_lock_ = true

[node name="Static" type="Node" parent="."]

[node name="Room" parent="Static" instance=ExtResource("3_bopiy")]
room_size = Vector2(25, 25)

[node name="Environment" parent="Static" instance=ExtResource("3_f8qbj")]

[node name="ExitGate" parent="." instance=ExtResource("4_5bsyv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.9551, 0, 11.0814)

[node name="Path3D" type="Path3D" parent="."]
curve = SubResource("Curve3D_jhqhn")

[node name="LargeTriggerPlate" parent="." instance=ExtResource("5_qph2h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.52717, -4.76837e-07, -1.00652)
minimum_entity_count = 1

[node name="ThingMoverCodeReveal" parent="." instance=ExtResource("6_vam6r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.7027, -1.90735e-06, -4.24214)
start_transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -11.4729, -4.76837e-07, 1.42756)
end_transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -11.4729, -4.29013, 1.42756)

[node name="Door" parent="." instance=ExtResource("7_ojljd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -12.0341, -4.76837e-07, 1.42756)

[node name="Decal" type="Decal" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -12.565, 2.31068, 0.279907)
size = Vector3(1.80273, 2, 1.60254)
texture_albedo = ExtResource("8_5n4xy")

[node name="Decal2" type="Decal" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -0.866025, -3.78552e-08, 0.5, 0.5, 2.18557e-08, 0.866025, -12.565, 2.31068, -1.42523)
size = Vector3(1.80273, 2, 1.60254)
texture_albedo = ExtResource("9_s44d6")

[node name="Decal3" type="Decal" parent="."]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -12.565, 2.31068, -2.75427)
size = Vector3(1.80273, 2, 1.60254)
texture_albedo = ExtResource("10_ivukf")

[node name="Pedestal" parent="." instance=ExtResource("11_impsd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.27908, 0, 3.91293)
code = "301"

[node name="ThingMoverExitWall" parent="." instance=ExtResource("6_vam6r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.7027, -1.90735e-06, -4.24214)
end_transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -4.26732, 0)

[node name="ExitWall" type="Node3D" parent="."]

[node name="Wall" parent="ExitWall" instance=ExtResource("7_ojljd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.89632, 0, 8.4266)

[node name="Wall2" parent="ExitWall" instance=ExtResource("7_ojljd")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 8.39489, 0, 8.4266)

[node name="PlayerSpawnPoint" parent="." instance=ExtResource("12_mhi6w")]
transform = Transform3D(-0.815795, 0, 0.578342, 0, 1, 0, -0.578342, 0, -0.815795, 2.16137, 0, -5.92636)

[connection signal="player_entered" from="ExitGate" to="." method="emit_level_finished"]
[connection signal="pressed" from="LargeTriggerPlate" to="ThingMoverCodeReveal" method="run"]
[connection signal="released" from="LargeTriggerPlate" to="ThingMoverCodeReveal" method="run"]
[connection signal="code_found" from="Pedestal" to="ThingMoverExitWall" method="run_once"]
