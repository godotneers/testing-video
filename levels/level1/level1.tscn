[gd_scene load_steps=19 format=3 uid="uid://bu0i0bw2bdi0v"]

[ext_resource type="PackedScene" uid="uid://dds0dfw14j1in" path="res://components/input_manager/input_manager.tscn" id="1_ttjls"]
[ext_resource type="PackedScene" uid="uid://c0liliyx8wsvv" path="res://components/torch/wall_torch.tscn" id="2_gc8my"]
[ext_resource type="PackedScene" uid="uid://di0lsfhe27r0f" path="res://components/wall/wall.tscn" id="3_aj31r"]
[ext_resource type="PackedScene" uid="uid://byosvo2hx7df8" path="res://components/player_pawn/player_pawn.tscn" id="4_uflgq"]
[ext_resource type="PackedScene" uid="uid://seyqrl7p6kpk" path="res://components/player_controller/player_controller.tscn" id="5_e2gyc"]
[ext_resource type="PackedScene" uid="uid://v7jhkhim0lok" path="res://components/trigger_plate/trigger_plate.tscn" id="6_wsno3"]
[ext_resource type="Script" uid="uid://046yasokxlji" path="res://components/thing_mover/thing_mover.gd" id="7_sgvry"]
[ext_resource type="PackedScene" uid="uid://dkr80d2pi0d41" path="res://addons/guide/debugger/guide_debugger.tscn" id="8_la5y6"]
[ext_resource type="PackedScene" uid="uid://c8yvwpvyuq5gx" path="res://components/doggo_pawn/doggo_pawn.tscn" id="9_3k617"]
[ext_resource type="PackedScene" uid="uid://blffmkn4b1w50" path="res://components/doggo_controller/doggo_controller.tscn" id="10_jhqhn"]
[ext_resource type="PackedScene" uid="uid://bcwkugn6v3oy7" path="res://addons/godot_state_charts/utilities/state_chart_debugger.tscn" id="11_ddtso"]
[ext_resource type="PackedScene" uid="uid://bxnqvnwvs8yjr" path="res://components/bone/bone.tscn" id="12_f7y8c"]
[ext_resource type="PackedScene" uid="uid://bxnqvs8yvjnkw" path="res://components/exit_gate/exit_gate.tscn" id="13_xc23s"]
[ext_resource type="PackedScene" uid="uid://bbmimwt64bivt" path="res://components/large_trigger_plate/large_trigger_plate.tscn" id="14_n5g8f"]

[sub_resource type="NavigationMesh" id="NavigationMesh_ttjls"]
vertices = PackedVector3Array(18, 0.5, 18, 18, 0.5, -7, 8.75, 0.5, -7, 8, 0.5, -7.75, -17.75, 0.5, -17.75, -17.75, 0.5, 18, 8, 0.5, -17.75, 11.25, 0.5, -17.75, 11.25, 0.5, -10.25, 18, 0.5, -10.25, 18, 0.5, -17.75)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 5), PackedInt32Array(3, 5, 4), PackedInt32Array(4, 6, 3), PackedInt32Array(10, 9, 7), PackedInt32Array(7, 9, 8)]
geometry_source_geometry_mode = 1
geometry_source_group_name = &"navmesh"
agent_radius = 1.0
agent_max_slope = 50.0
filter_ledge_spans = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gv5m4"]
albedo_color = Color(0.172549, 0.164706, 0.156863, 1)

[sub_resource type="Environment" id="Environment_f3sb7"]
background_mode = 1
sdfgi_enabled = true
sdfgi_read_sky_light = false

[sub_resource type="Curve3D" id="Curve3D_jhqhn"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 16.597, 0, -17.481, 0, 0, 0, 0, 0, 0, 18.0656, 0, -9.75919, 0, 0, 0, 0, 0, 0, 11.6043, 0, -9.72395, 0, 0, 0, 0, 0, 0, 12.297, 0, -17.2731),
"tilts": PackedFloat32Array(0, 0, 0, 0)
}
point_count = 4

[node name="Level1" type="Node3D"]

[node name="InputManager" parent="." instance=ExtResource("1_ttjls")]

[node name="Navigation" type="Node" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Navigation"]
navigation_mesh = SubResource("NavigationMesh_ttjls")

[node name="NavigationLink3D" type="NavigationLink3D" parent="Navigation"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.41, 0, -11.6055)
enabled = false
start_position = Vector3(-0.422725, 0, 2.12072)
end_position = Vector3(-0.388883, 0, 4.08356)

[node name="Static" type="Node" parent="."]

[node name="CSGBox3D" type="CSGBox3D" parent="Static" groups=["navmesh"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
use_collision = true
size = Vector3(40, 5, 40)
material = SubResource("StandardMaterial3D_gv5m4")

[node name="CSGBox3D2" type="CSGBox3D" parent="Static/CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
operation = 2
use_collision = true
size = Vector3(38, 5, 38)

[node name="WorldEnvironment" type="WorldEnvironment" parent="Static"]
environment = SubResource("Environment_f3sb7")

[node name="WallTorch" parent="Static" instance=ExtResource("2_gc8my")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.0204, 2.91619, 7.6978)

[node name="WallTorch2" parent="Static" instance=ExtResource("2_gc8my")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -19.0204, 2.91619, -10.7896)

[node name="WallTorch3" parent="Static" instance=ExtResource("2_gc8my")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -10.2569, 2.91619, -19.0491)

[node name="WallTorch4" parent="Static" instance=ExtResource("2_gc8my")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 5.18608, 2.91619, -19.0491)

[node name="WallTorch5" parent="Static" instance=ExtResource("2_gc8my")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 19.0641, 2.91619, -13.0225)

[node name="WallTorch6" parent="Static" instance=ExtResource("2_gc8my")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 19.0641, 2.91619, 11.0118)

[node name="Wall2" parent="Static" instance=ExtResource("3_aj31r")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 9.65981, -0.0906057, -19.0604)
affect_nav_mesh = true
length = 10.0

[node name="PlayerPawn" parent="." instance=ExtResource("4_uflgq")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 3.213, 0, -6.661)

[node name="PlayerController" parent="PlayerPawn" instance=ExtResource("5_e2gyc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.08163, 0)

[node name="TriggerPlate" parent="." instance=ExtResource("6_wsno3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.243, -0.09061, 2.26268)

[node name="MovableWall" parent="." instance=ExtResource("3_aj31r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.12161, -0.0906057, -8.55579)
affect_nav_mesh = true
length = 10.0

[node name="ThingMover" type="Node3D" parent="."]
script = ExtResource("7_sgvry")
target = NodePath("../MovableWall")
start_transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.12161, -0.0906057, -8.55579)
end_transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.12161, -4.30497, -8.55579)
metadata/_custom_type_script = "uid://046yasokxlji"

[node name="GuideDebugger" parent="." instance=ExtResource("8_la5y6")]
visible = false

[node name="DoggoPawn" parent="." instance=ExtResource("9_3k617")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.747, 0.0230365, -12.1346)

[node name="DoggoController" parent="DoggoPawn" node_paths=PackedStringArray("path") instance=ExtResource("10_jhqhn")]
path = NodePath("../../Path3D")

[node name="Path3D" type="Path3D" parent="."]
curve = SubResource("Curve3D_jhqhn")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="StateChartDebugger" parent="CanvasLayer" instance=ExtResource("11_ddtso")]
offset_right = -1372.0
offset_bottom = -548.0
initial_node_to_watch = NodePath("../../DoggoPawn/DoggoController")

[node name="Bone" parent="." instance=ExtResource("12_f7y8c")]

[node name="ExitGate" parent="." instance=ExtResource("13_xc23s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.41029, 0, 8.05726)

[node name="LargeTriggerPlate" parent="." instance=ExtResource("14_n5g8f")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.15477, 0, 0)

[connection signal="state_changed" from="TriggerPlate" to="ThingMover" method="run" unbinds=1]
[connection signal="arrived_at_end" from="ThingMover" to="Navigation/NavigationLink3D" method="set_enabled" binds= [true]]
[connection signal="departed_from_end" from="ThingMover" to="Navigation/NavigationLink3D" method="set_enabled" binds= [false]]
